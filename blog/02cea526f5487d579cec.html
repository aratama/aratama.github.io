<!DOCTYPE html>
<meta charset="UTF-8">

<!-- Twitter card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@cubbit2">
<meta name="twitter:creator" content="@cubbit2">
<meta name="twitter:title" content="モナドのまほう　第16話『Gamepad APIでブラウザでもゲームパッドを使う/Sentryでクラッシュレポート』 - ちょっと小さいのはたしかですが。">
<meta name="twitter:description" content="わたしのブログです。面白いかどうかは、わかりませんが。">
<meta name="twitter:image" content="https://aratama.github.io/img/29d6537f-b995-fb40-06e4-f0387a45377f.png">

<link rel="icon" type="image/png" href="icon.png">
<link rel="stylesheet" href="/res/reset.css">
<link rel="stylesheet" href="/res/style.css">

<title>モナドのまほう　第16話『Gamepad APIでブラウザでもゲームパッドを使う/Sentryでクラッシュレポート』 - ちょっと小さいのはたしかですが。</title>

<header>
    <div class="block-centered">
        <div class="site-title"><a href="/">ちょっと小さいのはたしかですが。</a></div>
        <div class="sub-title">わたしのブログです。面白いかどうかは、わかりませんが。</div>
    </div>
</header>



<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<!--
<link rel="stylesheet" href="/lib/highlight/styles/default.css">
<script src="/lib/highlight/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
-->

<!--
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$']]}
});
</script>
-->


<link rel="stylesheet" href="/res/article.css">


    <div class="content">

        <article id="rendered">
            <div class="date">2017年1月5日</div>
            <h1 class="article-title">
                <!-- <i class="fa fa-coffee" aria-hidden="true"></i> -->
                <a href="02cea526f5487d579cec.html">モナドのまほう　第16話『Gamepad APIでブラウザでもゲームパッドを使う/Sentryでクラッシュレポート』<a>
            </h1>        
            <p class="tags"><a href="ゲーム制作.html"><span class="tag"><i class="fa fa-tag" aria-hidden="true"></i>ゲーム制作</span></a>
<a href="ゲーム開発.html"><span class="tag"><i class="fa fa-tag" aria-hidden="true"></i>ゲーム開発</span></a>
<a href="sentry.html"><span class="tag"><i class="fa fa-tag" aria-hidden="true"></i>sentry</span></a>
<a href="GamepadAPI.html"><span class="tag"><i class="fa fa-tag" aria-hidden="true"></i>GamepadAPI</span></a></p>
            <hr>
            <!-- {
  "id": "02cea526f5487d579cec",
  "created_at": "2017-01-05T02:24:46+09:00",
  "tags": [
    {
      "name": "ゲーム制作",
      "versions": []
    },
    {
      "name": "ゲーム開発",
      "versions": []
    },
    {
      "name": "sentry",
      "versions": []
    },
    {
      "name": "GamepadAPI",
      "versions": []
    }
  ],
  "title": "モナドのまほう　第16話『Gamepad APIでブラウザでもゲームパッドを使う/Sentryでクラッシュレポート』"
} -->
<p><a href="/blog/5321d8cebce7b87851f6.html">第一話</a> / <a href="/blog/6b4353009059836569d1.html">前回</a> / <a href="/blog/https://aratama.github.io/cubbit/.html">デモ</a></p><p>ゲームを作る日記です。本作の開発費は０円です。</p><h1><a name="-" class="anchor" href="#-"><span class="header-link"></span></a>ゲームパッドに対応しました</h1><p>行方不明だったゲームパッドが無事発見されたので、ゲームパッドへの対応を始めました。UIをかなりいじる必要があるのでまだ作業途中なのですが、フィールドを歩き回ったり周囲を見回す操作がゲームパッドでできるようになっています。</p><p>マウスやキーボードよりゲームパッドでプレイするほうが私は好きですし、むしろゲームパッド前提にしたくなってきました。ブロックを置くのはマウスのほうが便利なんですが、フィールドを歩きまわるのはゲームパッドのほうが圧倒的に楽です。ただ、ゲームパッドだと三人称視点でのブロックの配置操作をどうするかが悩みどころです。ドラクエビルダーズみたいに隣接する区画だけに置けるようにするというのもひとつの手だとは思います。</p><h1><a name="-" class="anchor" href="#-"><span class="header-link"></span></a>起動を早くしたいけど無理でした</h1><p>ウェブから起動すると、github pagesがあまり早くないのもあって起動にかなりの時間がかかると思いますが、ローカルで動かしているときも起動に１０秒くらいかかります。開発中は頻繁に再起動を繰り返すので、あまり快適とは言えません。起動を早く出来ないか検討したのですが、いい方法が見つかりません。画像や音声などのファイルの読み込みを可能な限り遅らせようとしても、結局シーンの切り替えが長くなるだけで根本的な解決にはならなさそうです。よくクソゲーの理由として「ロードが長い」が挙げられますし、たびたび挟まれるロードはプレイヤーにとってかなりのストレスになると思われるので、そういう意味でも起動時に可能な限りすべて読み込んでしまうのがベターであるように思います。</p><p>しかたないので、起動中に間をもたせるために操作ガイドを表示することにしました。<a href="/blog/https://inkscape.org/.html">Inkscape</a>でテキトーに描いたんですが、やっぱりデザインのアイデアがさっぱり浮かんでこないのでダサいです。デザインってイラストレーションなんかともまた違ったセオリーがあってすごく難しいです。普段からデザインのアイデアを収集する習慣がないので、引き出しがぜんぜん足りません。またいい感じのデザインが思いついたら差し替えようと思います。</p><p><a href="/img/29d6537f-b995-fb40-06e4-f0387a45377f.png"><img src="/img/29d6537f-b995-fb40-06e4-f0387a45377f.png"></img></a></p><h1><a name="sentry-" class="anchor" href="#sentry-"><span class="header-link"></span></a>Sentryを試しています</h1><p>クラッシュレポートが欲しくて、<a href="/blog/https://sentry.io/.html">Sentry/raven-js</a>を試しています。使い方はとても簡単で、Sentryにアカウントを登録したあと、アプリケーションに<code>raven.min.js</code>を読み込んで、それから<code>Raven.config(&#39;https://&lt;&lt;SentryのID&gt;&gt;&#39;).install()</code>を実行しravenを起動するだけです。そうすると、アプリでエラーが起きるたびにログを取ってくれます。</p><p>なおFirebaseにも<a href="/blog/https://firebase.google.com/docs/crash/.html">クラッシュレポート</a>の機能があって死ぬほど使いたいんですが、悲しいことにAndroidとiOSにしか提供されていないのです。それで早速ですが、Safariで<code>exitPointerLock</code>がないという問題が報告されました。なかなか便利そうです。</p><p><a href="/img/f6a9a283-8a65-0861-a198-0b9313fb79bd.png"><img src="/img/f6a9a283-8a65-0861-a198-0b9313fb79bd.png"></img></a></p><p><a href="/blog/http://caniuse.com/#feat=pointerlock.html">Can I Use</a>で見ると、Safariは<code>Technology Preview</code>っていうステータスになっていますね。うーん？</p><p><a href="/img/110ea224-2e0c-0280-0c82-544640022069.png"><img src="/img/110ea224-2e0c-0280-0c82-544640022069.png"></img></a></p><p>対処を考えたいですが、貧乏な筆者は残念ながらMacを持っていないので、いやMacが高いとかそういう意味ではなくガチで筆者は貧乏なので、今のところ推奨環境は筆者が動作確認のできるChrome/Firefox/Edgeに限っています。誰かが私にMacを買い与えてくれれば、Safariも加えたいと思います。他にも、古いSafari(?)でSyntaxErrorが出てますね。Safari使いの人はごめんなさい。問題が起きていることはある程度把握しています。QiitaはなぜかSafari率がかなり高いサイトのようですし、いずれSafariにも対応したいと思います。</p><p>ちなみにスマホはぜんぶ対象外です。性能面が極めて厳しいというのもありますし、操作性が劣悪なので筆者があんまりスマホでゲームするのが好きじゃないっていうのもあります。現代ではどう考えてもPCゲーよりスマホゲーのほうが売れますが、私はスマホゲー作るのはあんまり興味が薄かったりします。</p><h1><a name="rawgit-cdn" class="anchor" href="#rawgit-cdn"><span class="header-link"></span></a>rawgitでCDN</h1><p><a href="/blog/https://github.com/aratama/cubbit.html">githubのreadme</a>に、RawGit/MaxCDNを通じてデモを起動するリンクを用意してみました。github pagesよりrawgit経由のほうがずっと読み込みが早いのでお勧めです。rawgitのほうのURLは随時変更されるので、readmeに乗っているリンクから開いてください。ただしドメインが変わってしまうので、シングルプレイヤーモードでのデータが共有できませんが。</p><h1><a name="-" class="anchor" href="#-"><span class="header-link"></span></a>次のお話</h1><ul>
<li><ul>
<li><a href="/blog/ce2abda332d50f461493.html">第17話『ｱｶﾈﾁｬﾝｶﾜｲｲﾔｯﾀｰ!』</a></li>
</ul>
</li>
</ul>
<hr>

            
<hr style="margin-top: 200px;">

<div class="snsbuttons">

    <!-- Twitter -->
    <a href="https://twitter.com/share" class="twitter-share-button" data-related="cubbit2">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

    <!-- Hatena -->
    <div>
        <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label-counter" data-hatena-bookmark-lang="ja" title="このエントリーをはてなブックマークに追加"><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="このエントリーをはてなブックマークに追加" width="20" height="20" style="border: none;" /></a><script type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>
    </div>

    <!-- line -->
    <div>
        <div class="line-it-button" style="display: none;" data-type="share-a" data-lang="ja" ></div>
        <script src="//scdn.line-apps.com/n/line_it/thirdparty/loader.min.js" async="async" defer="defer" ></script>
    </div>

    <!--facebook -->
    <div>
        <div id="fb-root"></div>
        <script>(function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.8";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script>
        <div class="fb-like" data-href="https://aratama.github.io/blog/${metadata.id}.md" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true" data-share="false"></div>
    </div>

    <!-- google+ -->
    <div>
        <script src="https://apis.google.com/js/platform.js" async defer>
        {lang: 'ja'}
        </script>
        <div class="g-plusone" data-size="medium"></div>
    </div>

</div>
        </article>
    </div>

<footer>
    <div class="block-centered footer-inner">
        <p class="copy">&nbsp;</p>
        <p class="author">このブログを書いてる人:&nbsp;&nbsp; 兎沢<p>
    </div>

    <script>
        const poem = [
            "なんにもない毎日が、なによりの宝物。",
            "今日という日を、何度でも繰り返したい。",
            "世界を追いかけなくても、世界は私のまわりにある。", 
            "速すぎる雑踏。鼻先をくすぐる春風。", 
            "明日撮る写真を飾る場所を、アルバムに空けておこう。", 
            "落ち葉が地面に、触れる音がした。", 
            "明日は、明日の楽しさが待っている。", 
            "風が泣いている。この想いを紡ぐ言葉を持たないから。", 
            "もうここには何もない。つまり、はじまりの時が来た。", 
            "もう此処にはこないだろう。そう言って私は過去に背を向けた。", 
            "散りゆくからこそ、美しい。私は桜の花びらをかかとで踏みしめた。", 
            "思い出はいつだって輝いてる。",
            "正直ばかりじゃつまらない。たまには楽しい嘘をつこう。", 
            "ゆっくり歩けば歩くほど、時間がゆっくり過ぎてゆく。",
            "夜明けを、探しにいこう。", 
            "空はこんなに青かったんだ。", 
            "地球は青かった。それはこの空を見上げたことのある全員が知っている。", 
            "休み時間は、長すぎるということはない。", 
            "缶コーヒーを飲むときだけは、それ以外のすべてを忘れることにしてる。", 
            "ちょっと小さいのは確かですが、それは確かにここにあります。", 
            "ちょっと小さいのは確かですが、広すぎる家というのも寂しいでしょう？", 
            "ひつじが一匹、ひつじが二匹。五十匹までは、数えたことがある。"
        ];
    document.querySelector(".copy").textContent = poem[Math.floor(poem.length * Math.random())];
    </script>
</footer>

