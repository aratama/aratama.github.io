<!DOCTYPE html><html lang="ja"><head><meta charset="UTF-8"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@cubbit2"><meta name="twitter:creator" content="@cubbit2"><meta name="twitter:title" content="モナドのまほう　第６話『makehumanとBlenderで涼風青葉ちゃんごっこの巻』 - ちょっと小さいのはたしかですが。"><meta name="twitter:description" content="モナドのまほう　第６話『makehumanとBlenderで涼風青葉ちゃんごっこの巻』"><meta name="twitter:image" content="https://aratama.github.io/blog/247c6c0034b6383c5436/thumbnail.jpg"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="icon.png"><link rel="stylesheet" href="/res/reset.css"><link rel="stylesheet" href="/res/style.css"><title>モナドのまほう　第６話『makehumanとBlenderで涼風青葉ちゃんごっこの巻』 - ちょっと小さいのはたしかですが。</title><script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-61162129-3', 'auto');
                ga('send', 'pageview');
            </script></head><body><header><div class="sns"><a target="_blank" href="https://twitter.com/intent/tweet?text=undefined%20https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/twitter.png" alt="twitter button"></a><a target="brank" href="http://www.facebook.com/sharer.php?u=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436&amp;t=undefined"><img src="/res/facebook.png" alt="facebook button"></a><a target="brank" href="https://plus.google.com/share?url=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/google.png" alt="google plus button"></a><a target="brank" href="http://b.hatena.ne.jp/entry/https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/hatena.png" alt="hatena bookmark button"></a><a target="brank" href="http://getpocket.com/edit?url=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436&amp;title=undefined"><img src="/res/pocket.png" alt="pocket button"></a></div><div class="block-centered"><div class="site-title"><a href="/">Admittedly <wbr>something <wbr>small.</a></div><div class="sub-title">ちょっと<wbr>小さいのは<wbr>たしかですが。</div></div></header><div class="content"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="/res/article.css"><article id="rendered"><div class="date">2016年11月24日</div><h1 class="article-title"><a href=".">モナドのまほう　第６話『makehumanとBlenderで涼風青葉ちゃんごっこの巻』</a></h1><p class="tags"><a href="/blog/tag/Blender"><span class="tag"><i class="fa fa-tag"></i>Blender</span></a><a href="/blog/tag/Babylon.js"><span class="tag"><i class="fa fa-tag"></i>Babylon.js</span></a><a href="/blog/tag/makehuman"><span class="tag"><i class="fa fa-tag"></i>makehuman</span></a></p><hr><div><ul>
<li><a href="5321d8cebce7b87851f6.html">第一話　画像が表示できました</a>　←初回</li>
<li><a href="7cba851de4d84a535bbb.html">第五話　Babylonjsでｹﾞｰﾄｵﾌﾞﾊﾞﾋﾞﾛﾝ</a>　←前回</li>
</ul>
<p>テキトーに楽しくゲームを作る日記の続きです。今回はコードが1ビットも出てきませんが許してください。</p><h1><a id="%E3%82%AD%E3%83%A3%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%8C%E3%82%93%E3%81%B0%E3%82%8B%E3%81%9E%E3%81%84" class="anchor" href="#%E3%82%AD%E3%83%A3%E3%83%A9%E3%82%AF%E3%82%BF%E3%83%BC%E3%83%A2%E3%83%87%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%8C%E3%82%93%E3%81%B0%E3%82%8B%E3%81%9E%E3%81%84"><span class="header-link"></span></a>キャラクターモデリングがんばるぞい</h1><p>それじゃあ今から<a href="http://newgame-anime.com/character/">涼風青葉ちゃん</a>ごっこします！　自分でイチからモデリングするのは大変なので、<a href="http://www.makehuman.org/">makehuman</a>という3D人物モデルを作れるオープンソースソフトウェアを使います。「負け不満」なんていうネガティブな名前なのに、性別、年齢、体格なんかをスライダで設定すると自動でそれっぽい人体モデルを作成してくれる凄いやつです。ゲームにあるキャラクタークリエイト機能みたいなものです。</p><p><a href="9da07b65-4e21-64a8-8577-1dbad89a05f0.png"><img src="9da07b65-4e21-64a8-8577-1dbad89a05f0.png" alt="null"></img></a></p><p>性別や年齢、身長や筋肉量、人種などのいろんなパラメータがあるので、これを適当にいじります。今回はゲーム用ということで、アニメ的なディフォルメのキャラクターを作るつもりなので年齢を低めにして頭身を下げます。開放感が溢れすぎていて公然わいせつ罪的な意味で危険が危ない感じがしたので、適当に服も着せました。</p><p><a href="a6bde869-acd3-b84d-eed5-68303c4e484f.png"><img src="a6bde869-acd3-b84d-eed5-68303c4e484f.png" alt="null"></img></a></p><p>あとはこれを<code>.dae</code>(Collada)形式でエクスポート。それをオープンソースの3DCGオーサリングツール<a href="https://www.blender.org/">Blender</a>にインポートすれば、この通りです。</p><p><a href="660d897a-9b36-857d-1846-f1eb980252f0.png"><img src="660d897a-9b36-857d-1846-f1eb980252f0.png" alt="null"></img></a></p><p>眼球のテクスチャがうまくキマっていないのか白目を剥いていますが、どうせ顔なんかは大幅に作り変えるので問題ありません(っていうかこの画像はQiitaでの説明用で、髪の毛とか邪魔なので実際には全裸でインポートしました)。</p><h1><a id="%E4%B8%8B%E7%B5%B5%E3%82%92%E6%8F%8F%E3%81%8D%E3%81%BE%E3%81%97%E3%82%87%E3%81%86" class="anchor" href="#%E4%B8%8B%E7%B5%B5%E3%82%92%E6%8F%8F%E3%81%8D%E3%81%BE%E3%81%97%E3%82%87%E3%81%86"><span class="header-link"></span></a>下絵を描きましょう</h1><p>Blenderにインポートしたら、まずはモデルの右半身の頂点をバッサリ削除し、代わりにMirrorモディファイアで左右対称にミラーリングします。それからDecimateモディファイアで頂点数を削減したり、それからあとは足を伸ばしたり腕を細くしたりとアニメ体型にひたすら魔改造します。顔はテクスチャで表現することにして、眼球や口の中の頂点はばっさり削って塞ぎました。リアルな口パクとかしたいなら目や口もちゃんと残したほうがいいんですが、アニメ的な表現でそれをやると不気味になりがちですし、陰影のつき方が不自然になりがちなので避けました。雰囲気の確認のためにマテリアルやテクスチャも簡単に割り当てます。それでこんな感じになります。</p><p><a href="e688f1c1-b15b-d120-8dc2-570c52faf4b5.png"><img src="e688f1c1-b15b-d120-8dc2-570c52faf4b5.png" alt="null"></img></a></p><p><a href="d3566366-341d-3728-7e01-c9d2c5c88afd.png"><img src="d3566366-341d-3728-7e01-c9d2c5c88afd.png" alt="null"></img></a></p><p>うん。ぜんぜん可愛くない。ゲームではキャラクターの見た目は重要なので、なんとかしなくては。どこか全体のバランスがおかしい感じがしますし、髪型がヘルメット状態なのもあってどこかのっぺりとした表情ですね。髪型も何の目安もなく頂点をいじってもうまく形にならなくて難しいです。うまい人はいきなりモデリングでうまくいくんでしょうが、筆者にそこまでの技術はないので、いったん２次元のデザイン画を起こして、それをトレースすることにします。普通はデザインを決めてからモデリング始めるのでしょうが、このシリーズのコンセプトはとにかく「行き当たりばったり」なので手戻りが多いです。</p><p>二次元のお絵かきはこのあいだまで<a href="http://www.clipstudio.net/">CLIP STUDIO PAINT</a>を使っていたんですが、このあいだ試用期限が切れてしまったので、その代わりに<a href="https://medibangpaint.com/">MediBang Paint</a>を試しています。なんか左右対称ツールがツールを切り替えるたびに軸を設定しなおさなくてはならなくてちょっと使いづらい……。ClipStudio買おうかな……。</p><p><a href="8d6d537c-e93e-de58-62f2-b883b526dad8.png"><img src="8d6d537c-e93e-de58-62f2-b883b526dad8.png" alt="null"></img></a></p><p>なんか物足りなく感じたので、あざといデカリボンとか生やしたら、なんか島風っぽくなってしまいました。島風ではないです。天江衣とかでもないです。一応このキャラクターデザインにも意味はあるのですが、あまりに行き当たりばったりに作っているので、この設定が実際に活かされるのかは謎です。それでBlenderに下絵として読み込み、大きさと位置をなんかいい感じに合わせます。</p><p><a href="a9e58a83-656c-6dcf-e8a8-872ed685e0ab.png"><img src="a9e58a83-656c-6dcf-e8a8-872ed685e0ab.png" alt="null"></img></a></p><p><a href="c67749ea-b34d-de1e-a6e6-053c812fc3ae.png"><img src="c67749ea-b34d-de1e-a6e6-053c812fc3ae.png" alt="null"></img></a></p><p>イラストと合わせるとわかるんですが、makehumanからインポートしてなんとなくいじった顔って全体的に顔のパーツが上に寄っていますね。というかアニメ顔が基本的にパーツが全部下寄りなので、makehumanのリアルな頭身をアニメ的にするには、かなり全体を下に下げないといけないみたいです。それでひたすらいじること数時間。髪の毛ももう少しちゃんと生やして、テクスチャもなんかそれっぽい感じで仮置きして、こんな感じです。</p><p><a href="00b3f551-4199-66d0-9036-8cc9fea47660.png"><img src="00b3f551-4199-66d0-9036-8cc9fea47660.png" alt="null"></img></a></p><p>なんか思っていたよりも少し頭身が高い感じがしますが、まあこんなものかもしれません。あんまり頭身が高いとカメラが引いた時に見づらいですが、ディフォルメし過ぎると今度はカメラが寄ったときに見栄えがイマイチになる気がします。キャラクターデザインもなんか物足りない気がするので、何か小物が欲しいですね。さらに、ゲーム内で実際に表示すると、Blenderで編集しているときとはまた違った感じで見えるので、今後も調整が延々と続きます。</p><p>それで、出来たキャラクターモデルをゲーム内に表示してみるとこんな感じになります。BabylonjsにBlenderからのエクスポートとインポートの機能があるので、ボーンアニメーションも含めてコーディング自体は簡単です。</p><p><a href="e75b3f31-4d13-177d-01e2-784aaea9c970.png"><img src="e75b3f31-4d13-177d-01e2-784aaea9c970.png" alt="null"></img></a></p><p>シーン全体に平行光源がひとつだけなので、顔に影が落ちてすごく見苦しいですね。初代プレイステーションのグラフィックみたいなチープ感があります。発光か環境光を設定して影の部分を明るくするか、キャラクター専用の光源が必要かもしれません。シェーディングもセルシェーディングにしたいですね。それかいっそのことシェーディングを切ってしまったほうがまだ見栄えがいいかもしれません。この辺りもノウハウが全然ないので研究が必要です。</p><h1><a id="%3Ca%20href%3D%22https%3A%2F%2Fwww.google.co.jp%2Fsearch%3Fq%3D%25E3%2581%25B2%25E3%2581%25B5%25E3%2581%25BF%25E3%2582%2593%26amp%3Bsource%3Dlnms%26amp%3Btbm%3Disch%26amp%3Bsa%3DX%22%3E%E3%80%8C%E3%81%B2%E3%81%B5%E3%81%BF%E3%82%93%E3%80%8D%E3%81%A7%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B%3C%2Fa%3E%E3%81%A8%E3%81%B2%E3%81%B5%E3%81%BF%E3%82%93%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%A8%E5%8A%A0%E8%97%A4%E4%B8%80%E4%BA%8C%E4%B8%89%E4%B9%9D%E6%AE%B5%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%8C%E4%BA%A4%E4%BA%92%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%82%8B%E4%BB%B6" class="anchor" href="#%3Ca%20href%3D%22https%3A%2F%2Fwww.google.co.jp%2Fsearch%3Fq%3D%25E3%2581%25B2%25E3%2581%25B5%25E3%2581%25BF%25E3%2582%2593%26amp%3Bsource%3Dlnms%26amp%3Btbm%3Disch%26amp%3Bsa%3DX%22%3E%E3%80%8C%E3%81%B2%E3%81%B5%E3%81%BF%E3%82%93%E3%80%8D%E3%81%A7%E6%A4%9C%E7%B4%A2%E3%81%99%E3%82%8B%3C%2Fa%3E%E3%81%A8%E3%81%B2%E3%81%B5%E3%81%BF%E3%82%93%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%A8%E5%8A%A0%E8%97%A4%E4%B8%80%E4%BA%8C%E4%B8%89%E4%B9%9D%E6%AE%B5%E3%81%AE%E7%94%BB%E5%83%8F%E3%81%8C%E4%BA%A4%E4%BA%92%E3%81%AB%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%82%8B%E4%BB%B6"><span class="header-link"></span></a><a href="https://www.google.co.jp/search?q=%E3%81%B2%E3%81%B5%E3%81%BF%E3%82%93&amp;source=lnms&amp;tbm=isch&amp;sa=X">「ひふみん」で検索する</a>とひふみんの画像と加藤一二三九段の画像が交互に表示される件</h1><p>キャラクターのモデリングは大変なので、人間型キャラクターはこのプレイヤーキャラクターひとりだけにする予定です。でも、マルチプレイヤーオンラインゲームなら他のプレイヤーも表示しなくてはならないので、そのあたりどうするか考えなくてはいけません。なんかシルエット的なものを表示するだけでもいいと思います。</p><p>プログラムも書かないといけないのに、キャラクターモデリングまで始めるともう時間と体力がいくらあっても足りないです。筆者はこれで更にBGM制作までやろうとしてますからね……。先は長いです。このシリーズ始めたときにはゾンビサバイバルアクション作るとか言ってたのに(GAIJINはみんなゾンビ好きなので)、いつの間にかマインクラフトになっていて、メルヘンで萌えっぽい感じになってきたよ！　いったいこのゲームはどこに向かっているんだ！</p><p>そういえばQiitaの仕様変わりましたね。ちなみに私はひふみんが一番好きです。ひふみんが好きな人はこの記事に「いいね」をしといてください。</p><h1><a id="%E6%AC%A1%E3%81%AE%E3%81%8A%E8%A9%B1" class="anchor" href="#%E6%AC%A1%E3%81%AE%E3%81%8A%E8%A9%B1"><span class="header-link"></span></a>次のお話</h1><ul>
<li><a href="2d186fd463afa50075b5.html">第七話　オープンワールドという泥沼</a></li>
</ul>
</div></article></div><footer><div class="sns"><a target="_blank" href="https://twitter.com/intent/tweet?text=undefined%20https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/twitter.png" alt="twitter button"></a><a target="brank" href="http://www.facebook.com/sharer.php?u=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436&amp;t=undefined"><img src="/res/facebook.png" alt="facebook button"></a><a target="brank" href="https://plus.google.com/share?url=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/google.png" alt="google plus button"></a><a target="brank" href="http://b.hatena.ne.jp/entry/https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436"><img src="/res/hatena.png" alt="hatena bookmark button"></a><a target="brank" href="http://getpocket.com/edit?url=https%3A%2F%2Faratama.github.io%2Fblog%2F247c6c0034b6383c5436&amp;title=undefined"><img src="/res/pocket.png" alt="pocket button"></a></div><div class="block-centered footer-inner"><p class="copy">&amp;nbsp;</p><p class="author">このブログを書いてる人: 竹内稲穂</p></div><script>
                    const poem = [
                        "なんにもない毎日が、なによりの宝物。",
                        "今日という日を、何度でも繰り返したい。",
                        "世界を追いかけなくても、世界は私のまわりにある。", 
                        "速すぎる雑踏。鼻先をくすぐる春風。", 
                        "明日撮る写真を飾る場所を、アルバムに空けておこう。", 
                        "落ち葉が地面に、触れる音がした。", 
                        "明日は、明日の楽しさが待っている。", 
                        "風が泣いている。この想いを紡ぐ言葉を持たないから。", 
                        "もうここには何もない。だから、次の場所に旅立とう。", 
                        "もう此処にはこないだろう。そう言って私は過去に背を向けた。", 
                        "散りゆくからこそ、美しい。私は桜の花びらをかかとで踏みしめた。", 
                        "思い出はいつだって輝いてる。",
                        "正直ばかりじゃつまらない。たまには楽しい嘘をつこう。", 
                        "ゆっくり歩けば歩くほど、時間がゆっくり過ぎてゆく。",
                        "夜明けを、探しにいこう。", 
                        "空はこんなに青かったんだ。", 
                        "地球は青かった。それはこの空を見上げたことのある全員が知っている。", 
                        "休み時間は、長すぎるということはない。", 
                        "缶コーヒーを飲むときだけは、それ以外のすべてを忘れることにしてる。", 
                        "ちょっと小さいのは確かですが、それは確かにここにあります。", 
                        "ちょっと小さいのは確かですが、広すぎる家というのも寂しいでしょう？", 
                        "ひつじが一匹、ひつじが二匹。五十匹までは、数えたことがある。"
                    ];
                    document.querySelector(".copy").textContent = poem[Math.floor(poem.length * Math.random())];
                </script></footer></body></html>